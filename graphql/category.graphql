type Category @model(class: "App\\Models\\Category") {
  id: ID!
  name: String!
  description:String
  show_in_navbar: Boolean
  show_in_homepage: Boolean
  show_in_grid: Boolean
  grid_order: Int
  template : Template
  ad : Ad
  news: [News!]! @hasMany 

  subCategories: [Category!]! @belongsToMany
}

input CategoryInput {
  name: TranslatableInput!
  description:TranslatableInput
  show_in_navbar : Boolean
  show_in_homepage: Boolean
  show_in_grid: Boolean
  grid_order:Int
  template_id:ID!

   sub_category_ids: [ID!]
}

input UpdateCategoryInput {
  id: ID!
  data: CategoryInput!
}


extend type Query {
  categories: [Category!]! @all
  category(id: ID! @eq): Category @find
}

extend type Mutation {
  CreateCategory(input: [CategoryInput!]!): [Category!]! 
    @guard(with: ["api"])
    @can(ability: "categories.create")
    @field(resolver: "App\\GraphQL\\Mutations\\CategoryMutator@create")

  UpdateCategory(input: [UpdateCategoryInput!]!): [Category!]! 
    @guard(with: ["api"])
    @can(ability: "categories.update")
    @field(resolver: "App\\GraphQL\\Mutations\\CategoryMutator@update")

  DeleteCategory(id: ID!): Boolean 
    @guard(with: ["api"])
    @can(ability: "categories.delete", model: "App\\Models\\Category")
    @field(resolver: "App\\GraphQL\\Mutations\\CategoryMutator@delete")
}
