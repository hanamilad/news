type ReelGroup {
  id: ID!
  title: String!
  user: User @belongsTo
  reels: [Reel!]! @hasMany
  cover_image: String
  is_active: Boolean
  sort_order: Int
  created_at: DateTime
  updated_at: DateTime
}


type Reel {
  id: ID!
  reel_group_id: ID
  description: String
  path: String
  type: TypeReel!
  is_active: Boolean
  sort_order: Int
  user: User @belongsTo
  group: ReelGroup @belongsTo
  created_at: DateTime
  updated_at: DateTime
}

enum TypeReel {
image
video
}



input ReelGroupInput {
  title: TranslatableInput!
  is_active: Boolean
  sort_order: Int
  reels: [ReelInput!]
}

input ReelInput {
  id: ID
  description: TranslatableInput!
  path: String
  type: TypeReel!
  sort_order: Int
  is_active: Boolean
}  

extend type Query {
  reels_for_admin(
    first: Int! = 10
    page: Int = 1
  ): [ReelGroup!]!
    @guard(with: ["api"])
    @can(ability: "reel.view")
    @field(resolver: "App\\GraphQL\\Queries\\ReelQuery@reels_for_admin")
    

  reels_for_public(
    first: Int! = 10
    page: Int = 1
  ): [ReelGroup!]!
    @field(resolver: "App\\GraphQL\\Queries\\ReelQuery@reels_for_public")
}

extend type Mutation {
  CreateReelGroup(input: ReelGroupInput!): ReelGroup
    @guard(with: ["api"])
    @can(ability: "reel.create")
    @field(resolver: "App\\GraphQL\\Mutations\\ReelGroupMutator@create")

  UpdateReelGroup(id: ID!, input: ReelGroupInput!): ReelGroup
    @guard(with: ["api"])
    @can(ability: "reel.update", model: "App\\Models\\ReelGroup")
    @field(resolver: "App\\GraphQL\\Mutations\\ReelGroupMutator@update")

  DeleteReelGroup(id: ID!): Boolean
    @guard(with: ["api"])
    @can(ability: "reel.delete", model: "App\\Models\\ReelGroup")
    @field(resolver: "App\\GraphQL\\Mutations\\ReelGroupMutator@delete")
}