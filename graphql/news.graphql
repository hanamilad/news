type News {
  id: ID!
  title: String!
  styled_description: String
  is_urgent: Boolean
  is_active: Boolean
  is_main: Boolean
  user: User
  category: Category
  hashtags: [Hashtag!]
  images: [NewsImage!]
  links: [NewsLink!]
  suggestedNews: [News!]! @field(resolver: "App\\GraphQL\\Resolvers\\NewsResolver@suggestedNews")
  publish_date: DateTime
  created_at: String
  updated_at: DateTime
}



type NewsImage {
  id: ID!
  image_path: String
  is_main: Boolean
}

type NewsLink {
  id: ID!
  video_link: String
}

input NewsLinkInput {
  video_link: String
}

input NewsInput {
  title: TranslatableInput!
  styled_description: TranslatableInput
  is_urgent: Boolean
  is_active: Boolean
  is_main: Boolean
  publish_date: DateTime
  category_id: ID!
  hashtag_ids: [ID!]
  links: [NewsLinkInput!]
}


extend type Query {
  news_for_admin(
    category_id: ID @where(operator: "=")
    first: Int! = 10
    page: Int = 1
  ): News! 
    @guard(with: ["api"])
    @can(ability: "news.view")
    @paginate(type: "PAGINATOR", model: "App\\Models\\News")

  urgent_news(
    first: Int! = 10
    page: Int = 1
  ): News! 
    @paginate(type: "PAGINATOR", model: "App\\Models\\News")
    @where(key: "is_urgent", operator: "=", value: true)


  news_for_public(
    category_id: ID!
    first: Int! = 10
    page: Int = 1
  ): [News!]!
    @paginate(
      defaultCount: 10
      builder: "App\\GraphQL\\Queries\\NewsQuery@newsForPublicBuilder"
  )

  FindNews(id: ID! @eq): News @find

    searchNews(
    search: String
    exclude: String
    include: String
    first: Int! = 10
    page: Int = 1
  ): [News!]!
    @field(resolver: "App\\GraphQL\\Queries\\NewsQuery@searchNews")
}

extend type Mutation {
  CreateNews(input: NewsInput!, images: [Upload!]): News
    @guard(with: ["api"])
    @can(ability: "news.create")
    @field(resolver: "App\\GraphQL\\Mutations\\NewsMutator@create")

  UpdateNews(id: ID!, input: NewsInput!, images: [Upload!]): News
    @guard(with: ["api"])
    @can(ability: "news.update")
    @field(resolver: "App\\GraphQL\\Mutations\\NewsMutator@update")

  DeleteNews(id: ID!): Boolean
    @guard(with: ["api"])
    @can(ability: "news.delete", model: "App\\Models\\News")
    @field(resolver: "App\\GraphQL\\Mutations\\NewsMutator@delete")
}
