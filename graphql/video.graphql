type Video {
  id: ID!
  description: String!
  video_path: String
  video: String
  type: String
  is_active: Boolean
  user: User
  publish_date: DateTime
  created_at: String
  updated_at: DateTime
}

enum VideoType{
  short
  long
}


input VideoInput {
  description: TranslatableInput!
  video_path: String
  type: VideoType!
  is_active: Boolean
  publish_date: DateTime
}   

extend type Query {
  videos_for_admin(
    first: Int! = 10,
    page: Int = 1
  ): Video!
    @guard(with: ["api"])
    @can(ability: "video.view")
    @paginate(type: "PAGINATOR", model: "App\\Models\\Video")

  short_videos_for_public(
    first: Int! = 10,
    page: Int = 1
  ): Video!
    @paginate(type: "PAGINATOR", model: "App\\Models\\Video")
    @where(key: "is_active", operator: "=", value: true)
    @where(key: "type", operator: "=", value: "short")

    long_videos_for_public(
    first: Int! = 10,
    page: Int = 1
  ): Video!
    @paginate(type: "PAGINATOR", model: "App\\Models\\Video")
    @where(key: "is_active", operator: "=", value: true)
    @where(key: "type", operator: "=", value: "long")

  video(id: ID! @eq): Video @find
}

extend type Mutation {
  CreateVideo(input: VideoInput!, video: Upload): Video
    @guard(with: ["api"])
    @can(ability: "video.create")
    @field(resolver: "App\\GraphQL\\Mutations\\VideoMutator@create")

  UpdateVideo(id: ID!, input: VideoInput!,video: Upload): Video
    @guard(with: ["api"])
    @can(ability: "video.update")
    @field(resolver: "App\\GraphQL\\Mutations\\VideoMutator@update")

  DeleteVideo(id: ID!): Boolean
    @guard(with: ["api"])
    @can(ability: "video.delete", model: "App\\Models\\Video")
    @field(resolver: "App\\GraphQL\\Mutations\\VideoMutator@delete")
}